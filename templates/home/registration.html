{% extends "base.html" %}
{% load static %}

{% block content %}
{% include "home/includes/site_header.html" %}

<main>
    <section class="hero">
        <div class="hero-media">
            <img src="{% static registration.hero_image %}" alt="Replace {{ registration.hero_image_label }} with a registration feature photo">
        </div>
        <div class="hero-overlay"></div>
        <div class="hero-content container home-hero registration-hero">
            {% if registration.eyebrow %}
                <span class="hero-eyebrow">{{ registration.eyebrow }}</span>
            {% endif %}
            <h1>{{ registration.title }}</h1>
            {% if registration.tagline %}
                <p class="hero-subtitle">{{ registration.tagline }}</p>
            {% endif %}
            <div class="hero-message hero-message--compact">
                <p>{{ registration.intro }}</p>
            </div>
            {% if registration.form_links %}
                <div class="hero-actions">
                    {% for link in registration.form_links %}
                        <a class="button button--primary" href="{{ link.url }}" target="_blank" rel="noopener">
                            {{ link.label }}
                        </a>
                    {% endfor %}
                </div>
            {% elif registration.form_url %}
                <div class="hero-actions">
                    <a class="button button--primary" href="{{ registration.form_url }}" target="_blank" rel="noopener">
                        {{ registration.form_label|default:"Start Registration" }}
                    </a>
                </div>
            {% endif %}
        </div>
    </section>

    <section class="info-sections container">
        <div class="info-grid">
            <article class="info-card info-card--accent">
                <h2>Division Snapshot</h2>
                <p>We currently field competitive and development teams in the following divisions:</p>
                <ul>
                    {% for division in registration.divisions %}
                        <li>{{ division }}</li>
                    {% endfor %}
                </ul>
                <p class="info-note">
                    Divisional offerings are reviewed annually and will be reconfirmed when registration formally opens.
                </p>
            </article>
            {% for section in registration.sections %}
                <article class="info-card{% if forloop.counter|divisibleby:2 %} info-card--accent{% endif %}">
                    <h2>{{ section.title }}</h2>
                    <p>{{ section.body }}</p>
                </article>
            {% endfor %}
        </div>
    </section>

    {% if registration.tryouts %}
        <section class="tryout-section">
            <div class="container">
                <div class="section-heading">
                    <h2>{{ registration.tryouts.title }}</h2>
                    <p>{{ registration.tryouts.subtitle }}</p>
                </div>

                <div class="tryout-grid">
                    <article class="info-card info-card--accent">
                        <h3>{{ registration.tryouts.location.name }}</h3>
                        <p class="tryout-address">{{ registration.tryouts.location.address }}</p>
                        {% if registration.tryouts.disclaimer %}
                            <p class="info-note">{{ registration.tryouts.disclaimer }}</p>
                        {% endif %}
                    </article>

                    {% if registration.tryouts.what_to_bring %}
                        <article class="info-card">
                            <h3>What to Bring</h3>
                            <ul>
                                {% for item in registration.tryouts.what_to_bring %}
                                    <li>{{ item }}</li>
                                {% endfor %}
                            </ul>
                        </article>
                    {% endif %}

                    {% if registration.tryouts.notes %}
                        <article class="info-card">
                            <h3>Important Notes</h3>
                            <ul>
                                {% for note in registration.tryouts.notes %}
                                    <li>{{ note }}</li>
                                {% endfor %}
                            </ul>
                        </article>
                    {% endif %}

                    {% if registration.tryouts.partner_tryout %}
                        <article class="info-card">
                            <h3>{{ registration.tryouts.partner_tryout.title }}</h3>
                            <p>{{ registration.tryouts.partner_tryout.body }}</p>
                            {% if registration.tryouts.partner_tryout.details %}
                                <ul>
                                    {% for detail in registration.tryouts.partner_tryout.details %}
                                        <li>{{ detail }}</li>
                                    {% endfor %}
                                </ul>
                            {% endif %}
                            {% if registration.tryouts.partner_tryout.registration_link %}
                                <a class="button button--primary" href="{{ registration.tryouts.partner_tryout.registration_link.url }}" target="_blank" rel="noopener">Register</a>
                            {% endif %}
                        </article>
                    {% endif %}
                </div>

                {% if registration.tryouts.schedule %}
                    <div class="tryout-table-wrap">
                        <div class="tryout-table-heading">
                            <h3>Assessment Sessions</h3>
                            <p>Tentative sessions are noted; arrive early for check-in.</p>
                        </div>
                        <table class="tryout-table">
                            <thead>
                                <tr>
                                    <th scope="col">Day</th>
                                    <th scope="col">Date</th>
                                    <th scope="col">Time</th>
                                    <th scope="col">Group</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for slot in registration.tryouts.schedule %}
                                    <tr{% if slot.tentative %} class="is-tentative"{% endif %}>
                                        <td>{{ slot.day }}</td>
                                        <td>{{ slot.date }}</td>
                                        <td>{{ slot.time }}</td>
                                        <td>{{ slot.group }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% endif %}
            </div>
        </section>
    {% endif %}

    <section class="contact-callout container">
        <div class="contact-card">
            <h2>Questions?</h2>
            <p>
                Email us at
                <a href="mailto:{{ contact_info.email }}">{{ contact_info.email }}</a>
                or call <a href="tel:{{ contact_info.phone_link }}">{{ contact_info.phone }}</a> and a member of the VMB executive will be happy to help.
            </p>
        </div>
    </section>
</main>
{% include "home/includes/footer.html" %}
{% include "home/includes/nav_script.html" %}
{% endblock %}
